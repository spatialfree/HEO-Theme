{% if cart.item_count > 0 %}
  <form action="/cart" method="post" class="cart-form" novalidate>

    <h1 class="h2">{{ 'cart.general.title' | t }}</h1>

    {% for item in cart.items %}
    <div class="cart-row" data-line="{{ forloop.index }}">
      <div class="grid">

        <div class="grid-item large--one-half">
          <div class="grid">

            <div class="grid-item one-third large--one-quarter">
              <a href="{{ item.url }}" class="cart-image">
                <img src="{{ item | img_url: 'medium' }}"  alt="{{ item.title | escape }}">
              </a>
            </div>

            <div class="grid-item two-thirds large--three-quarters">
              <a href="{{ item.url }}">
                {{ item.product.title }}
<!-- **BEGIN** Hextom USB Integration // Cart Include - DO NOT MODIFY -->
    {% render 'hextom_usb_cart', item: item %}
    <!-- **END** Hextom USB Integration // Cart Include - DO NOT MODIFY -->

              </a>
              {% unless item.variant.title contains 'Default' %}
                <br>
                <small>{{ item.variant.title }}</small>
              {% endunless %}

              {% if settings.product_quantity_message and item.variant.inventory_management and item.variant.inventory_quantity <= 0 and item.variant.incoming %}
                {% assign date = item.variant.next_incoming_date | date: format: 'date' %}
                <p><small>{{ 'products.product.will_not_ship_until' | t: date: date }}</small></p>
              {% endif %}

              {% assign property_size = item.properties | size %}
              {% if property_size > 0 %}
                {% for p in item.properties %}
                  {% if forloop.first %}<br>{% endif %}
                  {% assign first_character_in_key = p.first | truncate: 1, '' %}
                  {% unless p.last == blank or first_character_in_key == '_' %}
                    {{ p.first }}:

                    {% if p.last contains '/uploads/' %}
                      <a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
                    {% else %}
                      {{ p.last }}
                    {% endif %}

                    <br>
                  {% endunless %}
                {% endfor %}
              {% endif %}
            </div>

          </div>
        </div>

        <div class="grid-item large--one-half medium--two-thirds push--medium--one-third cart-pricing">
          <div class="grid">

            <div class="grid-item one-half text-right" style="display:flex; align-items:baseline;">
              <div class="step-btn" onclick="this.parentNode.querySelector('#product-count').stepDown()">-</div>
              <input id="product-count" type="number" name="updates[]" id="updates_{{ item.key }}" data-id="{{ item.key }}" value="{{ item.quantity }}" min="0" data-line="{{ forloop.index }}">
              <div class="step-btn" onclick="this.parentNode.querySelector('#product-count').stepUp()">+</div>
            </div>

            <div class="grid-item one-third medium-down--text-left text-right">

              {%- if item.original_line_price != item.final_line_price -%}
                <span class="visually-hidden">{{ 'products.general.regular_price' | t }}</span>
                <del class="cart-original-price order-discount--cart-price">{{ item.original_line_price | money }}</del>
                <span class="visually-hidden">{{ 'products.general.sale_price' | t }}</span>
                <span class="order-discount order-discount--cart-price">{{ item.final_line_price | money }}</span>
              {%- else -%}
                <span class="cart-original-price order-discount--cart-price">{{ item.original_line_price | money }}</span>
              {%- endif -%}

              {%- if item.line_level_discount_allocations != blank -%}
                <ul class="order-discount order-discount--list order-discount--cart-list order-discount--title" aria-label="{{ 'customer.order.discount' | t }}">
                  {%- for discount_allocation in item.line_level_discount_allocations -%}
                    <li class="order-discount__item">
                      <span class="icon icon-saletag" aria-hidden="true"></span>{{ discount_allocation.discount_application.title }} (-{{ discount_allocation.amount | money }})
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}

            </div>

            <div class="grid-item one-sixth text-right">
              <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" data-line="{{ forloop.index }}" class="icon-fallback-text btn-secondary remove">
                <span class="icon icon-x" aria-hidden="true"></span>
                <span class="fallback-text">{{ 'cart.general.remove' | t }}</span>
              </a>
            </div>

          </div>
        </div>

      </div>
    </div>

    {% endfor %}

    <div class="cart-row">
      <div class="grid">
        
        

        {% if settings.cart_notes_enable %}
          <div class="grid-item large--one-half">
            <label for="cartSpecialInstructions">{{ 'cart.general.note' | t }}</label>
            <textarea name="note" class="input-full" id="cartSpecialInstructions">{{ cart.note }}</textarea>
          </div>
        {% endif %}

        <div class="grid-item text-right{% if settings.cart_notes_enable %} large--one-half{% endif %}">
          
<!--     Custom Banner Image       -->
<!--           <a href="https://shop.home-essential-oils.com/pages/sales-promotion" class="cart-promo-link"><div class="cart-promo-label">Learn how to earn free with your order</div><img src="{{ 'cart-banner.jpeg' | asset_url }}" class="cart-promo"></a> -->
          
          <label>
          <input type="submit" name="update" class="btn-secondary update-cart" value="{{ 'cart.general.update' | t }}">
            <div class="update-cart-btn">
              Update Cart
              <svg aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="svg-inline--fa wellness-topics"> <path fill="currentColor" d="M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z" class=""></path> </svg>
            </div>
          </label>
          
          

          <div class="cart-subtotal{% if settings.cart_notes_enable %} cart-subtotal--notes-enabled{% endif %}">

            {%- if cart.cart_level_discount_applications != blank -%}
              <div class="order-discount-cart-wrapper">
                {%- for discount_application in cart.cart_level_discount_applications -%}
                  <span class="order-discount order-discount--title">
                    <span class="icon icon-saletag" aria-hidden="true"></span><span class="visually-hidden">{{ 'customer.order.discount' | t }}:</span>{{- discount_application.title -}}
                  </span>
                  <span class="order-discount order-discount--cart-price">-{{ discount_application.total_allocated_amount | money }}</span>
                {%- endfor -%}
              </div>
            {%- endif -%}

            <span id="revy-cart-subtotal-label">{{ 'cart.general.subtotal' | t }}</span>
            <span class="h1 cart-subtotal--price">
              <span id="revy-cart-subtotal-price">{% include 'price' with cart.total_price %}</span>
            </span>
          </div>

          {%- capture taxes_shipping_checkout -%}
            {%- if shop.taxes_included and shop.shipping_policy.body != blank -%}
              {{ 'cart.general.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
            {%- elsif shop.taxes_included -%}
              {{ 'cart.general.taxes_included_but_shipping_at_checkout' | t }}
            {%- elsif shop.shipping_policy.body != blank -%}
              {{ 'cart.general.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
            {%- else -%}
              {{ 'cart.general.taxes_and_shipping_at_checkout' | t }}
            {%- endif -%}
          {%- endcapture -%}
          
<!--           {{ taxes_shipping_checkout }} -->
          <div class="cart__policies">Tax included
<!--           	<img width="100%" src="https://imgur.com/COTPhCv.png" style="max-width: 512px;"> -->
          </div>
          
          <div style="margin-left: auto; width: 100%; max-width: 310px; background-color: white; padding: 1px 0; border-radius: 2px;">
          	<p class="for-free" style="margin: 0.5em 1em; color: #333; font-size: 13px; text-align: center; font-weight: bold;"></p>
            <div class="for-free-bar-bg" style="height: 4px; border-radius: 2px; margin: 2px; background-color: #3f3f3f;">
            <div class="for-free-bar" style="display:none; height: 4px; border-radius: 2px;">
              <div style="width: 5%; height: 100%; background-color: white; margin-left: auto; border-radius: 2px;"></div>
            </div>
          </div>
          </div>
          <br>

          <button type="submit" name="checkout" class="btn btn--wide" style="min-width: 310px; height: 56px; font-size: 18px;">
            <span class="icon icon-cart"></span>
            {{ 'cart.general.checkout' | t }}
          </button>
          <br>
          <a href="pages/promotions">
          <div class="btn btn--wide join" style="min-width: 310px; font-size: 18px;">
            <div style="height: fit-content;">Have you checked out<br>our latest promos?</div>
          </div>
          </a>
          
		  {% comment %}
		  {% if additional_checkout_buttons %}
            <div class="additional-checkout-buttons">{{ content_for_additional_checkout_buttons }}</div>
          {% endif %}
          {% endcomment %}
          
          <p></p>
          <p></p>
          <p></p>
          
          <div>
            <p>
              A portion of all sales are donated to
            </p>
            <a href="https://www.daysforgirls.org/" target="_blank">
              <img src="https://static.wixstatic.com/media/1150cf_2fcf8c5b2a6e44629ee37094c9bb8c65~mv2.png/v1/fill/w_192,h_92,al_c,q_80,usm_0.66_1.00_0.01/1150cf_2fcf8c5b2a6e44629ee37094c9bb8c65~mv2.webp" width="166px"/>
            </a>
          </div>
          
          <p></p>
          <p></p>
<!--           <div style="
			background-image: url(https://thelastfashionbible.com/wp-content/uploads/2019/01/doterra-1200x500.jpg);
    		background-size: cover;
    		text-align: center; 
			display: block; 
            margin: 0 auto;
            ">
            <p style="font-size: 32px;background: linear-gradient(180deg, white, transparent);"><b>Save 25% forever*</b></p>
            <div class="join-cart-banner-text" style="
            	background-color: white;
                margin: auto;
				width: 300px;
                padding: 14px;
				margin-bottom: 14px;
				text-align: left;
			">
              <p style="margin: 0;">
                + Earn reward points every time you shop<br />
                + Exclusive monthly promotions<br />
                + Includes free magazine &amp; Intro Booklet
              </p>
            </div>
            <a href="/pages/become-a-doterra-member-and-save"><div style="color: white; background-color: #b6bc1e; margin: auto; width:300px; height:50px; padding: 14px;"><p>Become a Wholesale Member!</p></div></a>
          </div> -->
        </div>
      </div>
    </div>

  </form>

{% else %}

  <div id="EmptyCart">
    <h1 class="h2">{{ 'cart.general.title' | t }}</h1>
    <p class="cart--empty-message">{{ 'cart.general.empty' | t }}</p>
<!--     <p class="cart--continue-message">{{ 'cart.general.continue_browsing_html' | t }}</p> -->
    <p class="cart--continue-message">Return <a href="https://shop.home-essential-oils.com">Home</a></p>
    <p class="cart--cookie-message">{{ 'cart.general.cookies_required' | t }}</p>
  </div>

{% endif %}
